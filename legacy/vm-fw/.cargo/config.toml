[target.'cfg(all(target_arch = "arm", target_os = "none"))']
# replace nRF52840_xxAA with your chip as listed in `probe-rs chip list`
# runner = "cargo bin probe-rs run --chip nRF52840_xxAA"

# If you don't want to use cargo-bin's version
runner = "probe-rs run --chip nRF52840_xxAA"

[build]
target = "thumbv7em-none-eabihf"
rustflags = '-C target-cpu=cortex-m4 --cfg context="vm"'

# Uncomment to see flash/memory usage report
# [env]
# RUSTC_LOG = "rustc_codegen_ssa::back::link=info"

# [patch."https://github.com/odysseyarm/ats_common"]
# ats_common = { path = "patch/ats_common" }
#
[patch."https://github.com/odysseyarm/protodonge-rs"]
protodongers = { path = "patch/protodonge-rs" }

# [patch."https://github.com/0e4ef622/icm426xx"]
# icm426xx = { path = "patch/icm426xx" }

# [patch."https://github.com/Abrahamh08/bmi2"]
# bmi2 = { path = "../../../../forks/bmi2" }

[patch.crates-io]
# embassy-nrf = { path = "../../../../forks/embassy/embassy-nrf" }
# embassy-time-driver = { path = "../../../../forks/embassy/embassy-time-driver" }
# embassy-usb-driver = { path = "../../../../forks/embassy/embassy-usb-driver" }
# embassy-executor = { path = "../../../../forks/embassy/embassy-executor" }
# embassy-time = { path = "../../../../forks/embassy/embassy-time" }
embassy-usb-driver = { git = "https://github.com/embassy-rs/embassy" }

[env]
DEFMT_LOG = "info"
